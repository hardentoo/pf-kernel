It was pretty much hard and non-trivial release, not because I was too lazy to
make something during the last month, but because everything I tried to make
either kernel-paniced or didn't work somehow.  
  
First thing I succeeded in was porting UKSM for new kernel, and it even was
accepted by Nai Xia, UKSM developer. Secondly, guys from Italy released
wonderful I/O scheduler, BFQ, which I was least worried about. Many thanks to
Paolo and Arianna (and other devs if any) for their great job.  
  
The first crap happened with TuxOnIce, which didn't want to hibernate in any
way. Fortunately, Nigel acknowledged that problem, and some time later
committed swap allocation related fix, which made my laptop happier. Many
thanks to Nigel, I wish he had more time to develop TOI as it works much
faster than vanilla hibernation.  
  
And the last thing was BFS from Con. It appeared that it broke vanilla
hibernation (which I used while waiting for TOI fix). The most interesting
part of this story is that TOI wasn't affected, so unpatched BFS worked with
patched TOI well. Again, fortunately, Con presented two patches, and the last
patch was that one everybody needed. Many thanks to Con and all the testers,
now everyone should be happy â€” those who use TOI, and those who don't.  
  
So, all blocking issues have been eliminated, and I'm proud to introduce first
pf-kernel release for Linux 3.12 branch. You may grab [the
patch](https://pf.natalenko.name/sources/3.12/patch-3.12.1-pf.bz2) right now
and compile it while it's hot.  
  
As usual, it includes:  
  

  * latest stable fixes from GKH (3.12.2 for now);
  * -ck with additionally patched BFS to workaround affinity issues on hibernation;
  * BFQ;
  * TuxOnIce slightly patched by me not to pollute dmesg on cold boot;
  * UKSM.

  
Known issues are:  
  

  * UKSM behaviour with zRAM enabled is undefined;
  * BFS pollutes dmesg with (hopefully) harmless warnings on boot; if it really harms, let me know.

  
Shortlog appended. Created with the following command:  
  

    
    
    git shortlog --no-merges --since="2013-11-03 23:41:59" v3.12..v3.12.1-pf

  
  
Have a nice weekend, and let me know if something goes wrong.  
  

    
    
    Aaron Lu (1):  
          ACPI / video: Quirk initial backlight level 0  
      
    Al Viro (1):  
          prepend_path() needs to reinitialize dentry/vfsmount/mnt on restarts  
      
    Alfred Chen (2):  
          The Brain Fuck Scheduler v0.441 by Con Kolivas.  
          Fix BFS circle dead lock.  
      
    Anatolij Gustschin (1):  
          powerpc/52xx: fix build breakage for MPC5200 LPBFIFO module  
      
    Anssi Hannula (1):  
          ALSA: hda - hdmi: Fix reported channel map on common default layouts  
      
    Anton Blanchard (2):  
          powerpc: ppc64 address space capped at 32TB, mmap randomisation disabled  
          powerpc/pseries: Duplicate dtl entries sometimes sent to userspace  
      
    Ben Hutchings (1):  
          cxgb3: Fix length calculation in write_ofld_wr() on 32-bit architectures  
      
    Ben Skeggs (1):  
          drm/nvc0-/gr: fix a number of missing explicit array terminators...  
      
    Christoffer Dall (1):  
          arm/arm64: KVM: Fix hyp mappings of vmalloc regions  
      
    Christoph Hellwig (2):  
          nfsd: split up nfsd_setattr  
          nfsd: make sure to balance get/put_write_access  
      
    Christoph Lameter (1):  
          slub: Handle NULL parameter in kmem_cache_flags  
      
    Dan Carpenter (1):  
          libertas: potential oops in debugfs  
      
    Daniel Borkmann (2):  
          net: sctp: do not trigger BUG_ON in sctp_cmd_delete_tcb  
          net: sctp: do not trigger BUG_ON in sctp_cmd_delete_tcb  
      
    David Henningsson (3):  
          ALSA: hda - Make sure mute LEDs stay on during runtime suspend (Realtek)  
          ALSA: hda - Fix Line Out automute on Realtek multifunction jacks  
          ALSA: hda - Add headset quirk for Dell Inspiron 3135  
      
    Eric Dumazet (1):  
          tcp: gso: fix truesize tracking  
      
    Eric Sandeen (1):  
          xfs: be more forgiving of a v4 secondary sb w/ junk in v5 fields  
      
    Felix Fietkau (1):  
          rt2x00: fix a crash bug in the HT descriptor handling fix  
      
    Fenghua Yu (1):  
          x86/apic: Disable I/O APIC before shutdown of the local APIC  
      
    Gabor Juhos (1):  
          rt2x00: rt2800lib: fix VGC adjustment for RT5592  
      
    Gavin Shan (2):  
          powerpc/powernv: Add PE to its own PELTV  
          powerpc/eeh: Enable PCI_COMMAND_MASTER for PCI bridges  
      
    Gerd Hoffmann (1):  
          hyperv-fb: add pci stub  
      
    Gerhard Sittig (1):  
          powerpc/mpc512x: silence build warning upon disabled DIU  
      
    Greg Edwards (1):  
          KVM: IOMMU: hva align mapping page size  
      
    Greg Kroah-Hartman (2):  
          Linux 3.12.1  
          Linux 3.12.2  
      
    Greg Thelen (1):  
          ipc,shm: fix shm_file deletion races  
      
    Guenter Roeck (1):  
          hwmon: (lm90) Fix max6696 alarm handling  
      
    Hannes Frederic Sowa (2):  
          ipv6: ip6_dst_check needs to check for expired dst_entries  
          ipv6: reset dst.expires value when clearing expire flag  
      
    Hans de Goede (1):  
          Bluetooth: revert: "Bluetooth: Add missing reset_resume dev_pm_ops"  
      
    Heiko Carstens (1):  
          powerpc: Fix __get_user_pages_fast() irq handling  
      
    Herbert Xu (1):  
          crypto: s390 - Fix aes-cbc IV corruption  
      
    Ian Abbott (1):  
          staging: comedi: avoid memleak for subdevice private  
      
    J. Bruce Fields (3):  
          nfsd: return better errors to exportfs  
          nfsd4: fix discarded security labels on setattr  
          nfsd4: fix xdr decoding of large non-write compounds  
      
    Jack Morgenstein (2):  
          net/mlx4_core: Fix call to __mlx4_unregister_mac  
          net/mlx4_core: Fix call to __mlx4_unregister_mac  
      
    Jason Wang (2):  
          net: flow_dissector: fail on evil iph->ihl  
          virtio-net: correctly handle cpu hotplug notifier during resuming  
      
    Jeff Layton (3):  
          nfs: fix inverted test for delegation in nfs4_reclaim_open_state  
          nfs: fix oops when trying to set SELinux label  
          nfs: don't retry detect_trunking with RPC_AUTH_UNIX more than once  
      
    Jeff Moyer (1):  
          block: fix race between request completion and timeout handling  
      
    Jesper Nilsson (1):  
          ipc,shm: correct error return value in shmctl (SHM_UNLOCK)  
      
    Johan Hovold (3):  
          misc: atmel_pwm: add deferred-probing support  
          backlight: atmel-pwm-bl: fix deferred probe from __init  
          USB: mos7840: fix tiocmget error handling  
      
    John Stultz (1):  
          staging: ashmem: Fix ASHMEM_PURGE_ALL_CACHES return value  
      
    Josef Bacik (1):  
          Btrfs: relocate csums properly with prealloc extents  
      
    Julius Werner (1):  
          usb: hub: Clear Port Reset Change during init/resume  
      
    Junxiao Bi (1):  
          configfs: fix race between dentry put and lookup  
      
    K. Y. Srinivasan (1):  
          Drivers: hv: vmbus: Fix a bug in channel rescind code  
      
    Kailang Yang (1):  
          ALSA: hda - Add support of ALC255 codecs  
      
    Kees Cook (2):  
          lkdtm: isolate stack corruption test  
          exec/ptrace: fix get_dumpable() incorrect tests  
      
    Kevin Hao (1):  
          ftrace/x86: skip over the breakpoint for ftrace caller  
      
    Larry Finger (1):  
          staging: r8188eu: Set device type to wlan  
      
    Laurent Pinchart (1):  
          drm: shmobile: Add dependency on BACKLIGHT_CLASS_DEVICE  
      
    Mahesh Rajashekhara (1):  
          aacraid: prevent invalid pointer dereference  
      
    Markus Pargmann (1):  
          can: c_can: Fix RX message handling, handle lost message before EOB  
      
    Martin Schwidefsky (2):  
          s390/time: fix get_tod_clock_ext inline assembly  
          s390/vtime: correct idle time calculation  
      
    Mathias Nyman (1):  
          xhci: Enable LPM support only for hardwired or BESL devices  
      
    Mauro Andreolini (1):  
          block, bfq: add Early Queue Merge (EQM) to BFQ-v6r2 for 3.12.0  
      
    Mauro Carvalho Chehab (1):  
          cris: media platform drivers: fix build  
      
    Michael Neuling (1):  
          powerpc/signals: Mark VSX not saved with small contexts  
      
    Mike Snitzer (1):  
          block: properly stack underlying max_segment_size to DM device  
      
    Miklos Szeredi (2):  
          GFS2: d_splice_alias() can't return error  
          GFS2: fix dentry leaks  
      
    Mikulas Patocka (1):  
          block: fix a probe argument to blk_register_region  
      
    Mimi Zohar (1):  
          Revert "ima: policy for RAMFS"  
      
    Neil Horman (1):  
          crypto: ansi_cprng - Fix off by one error in non-block size request  
      
    Nigel Cunningham (2):  
          Update get_swap_range_of_type for vanilla changes.  
          Don't try to thaw processes when we haven't frozen them  
      
    Oleksandr Natalenko (16):  
          version-3.12: bump to v3.12.1-pf  
          distro-3.12: bump to v3.12.1-pf  
          toi-3.12: remove annoying WARN_ON, it makes no sense for me  
          Revert "Merge remote-tracking branch 'tuxonice-kernel/tuxonice-head' into pf-3.12"  
          ck-3.12: add more strict BFS+RCU Kconfig rules  
          configs-3.12: update dell-vostro-3360.config against 3.12 tree  
          ck-3.12: merge official 3.12-ck1  
          configs-3.12: update dell-vostro-3360.config  
          ck-3.12: force disabling BOOTPARAM_HOTPLUG_CPU0 with BFS enabled  
          ck-3.12: merge experimental hibernation-related patch from Con  
          Revert "ck-3.12: merge experimental hibernation-related patch from Con"  
          ck-3.12: merge another experimental hibernation-related patch from Con  
          Revert "toi-3.12: remove annoying WARN_ON, it makes no sense for me"  
          Revert "fix for dmesg crash dump from TOI on resume..."  
          Revert "Revert "toi-3.12: remove annoying WARN_ON, it makes no sense for me""  
          configs-3.12: update dell-vostro-3360.config  
      
    Olivier Sobrie (1):  
          can: kvaser_usb: fix usb endpoints detection  
      
    Paolo Bonzini (1):  
          KVM: x86: fix emulation of "movzbl %bpl, %eax"  
      
    Paolo Valente (2):  
          block: cgroups, kconfig, build bits for BFQ-v6r2-3.12  
          block: introduce the BFQ-v6r2 I/O sched for 3.12  
      
    Peter Zijlstra (1):  
          sched, idle: Fix the idle polling state logic  
      
    Prarit Bhargava (1):  
          powerpc/vio: use strcpy in modalias_show  
      
    Puneet Kumar (1):  
          ACPI / EC: Ensure lock is acquired before accessing ec struct members  
      
    Rafael J. Wysocki (2):  
          ACPI / hotplug: Fix handle_root_bridge_removal()  
          ACPI / hotplug: Do not execute "insert in progress" _OST  
      
    Rashika Kheria (1):  
          Staging: zram: Fix access of NULL pointer  
      
    Roger Tseng (1):  
          drivers/memstick/core/ms_block.c: fix unreachable state in h_msb_read_page()  
      
    Rui li (1):  
          USB: add new zte 3g-dongle's pid to option.c  
      
    Sarah Sharp (3):  
          usb: Don't enable USB 2.0 Link PM by default.  
          xhci: Set L1 device slot on USB2 LPM enable/disable.  
          usb: Disable USB 2.0 Link PM before device reset.  
      
    Sebastian Andrzej Siewior (5):  
          usb: musb: cancel work on removal  
          usb: musb: call musb_start() only once in OTG mode  
          usb: musb: dsps: move try_idle to start hook  
          usb: musb: dsps: redo the otg timer  
          usb: musb: core: properly free host / device structs in err path  
      
    Stanislaw Gruszka (3):  
          rt2x00: check if device is still available on rt2x00mac_flush()  
          rt2x00: fix HT TX descriptor settings regression  
          rt2800usb: slow down TX status polling  
      
    Steven Rostedt (2):  
          tracing: Fix potential out-of-bounds in trace_get_user()  
          perf/ftrace: Fix paranoid level for enabling function tracer  
      
    Suman Anna (1):  
          ARM: OMAP2+: hwmod: check for module address space during init  
      
    Takashi Iwai (17):  
          thinkpad_acpi: Fix build error when CONFIG_SND_MAX_CARDS > 32  
          ALSA: 6fire: Fix probe of multiple cards  
          ALSA: pcsp: Fix the order of input device unregistration  
          ALSA: hda - Apply GPIO setup for MacBooks with CS4208  
          ALSA: hda - Apply MacBook fixups for CS4208 correctly  
          ALSA: msnd: Avoid duplicated driver name  
          ALSA: hda - Introduce the bitmask for excluding output volume  
          ALSA: hda - Enable SPDIF for Acer TravelMate 6293  
          ALSA: hda - Force buffer alignment for Haswell HDMI controllers  
          ALSA: hda - Add support for CX20952  
          ALSA: hda - Add pincfg fixup for ASUS W5A  
          ALSA: hda - Check keep_eapd_on before inv_eapd  
          ALSA: hda - Don't turn off EAPD for headphone on Lenovo N100  
          ALSA: hda - Don't clear the power state at snd_hda_codec_reset()  
          ALSA: hda - Fix unbalanced runtime PM notification at resume  
          ALSA: hda - Fix the headphone jack detection on Sony VAIO TX  
          ALSA: hda - Provide missing pin configs for VAIO with ALC260  
      
    Thomas Pugliese (1):  
          usb: wusbcore: set the RPIPE wMaxPacketSize value correctly  
      
    Thomas Renninger (1):  
          x86/microcode/amd: Tone down printk(), don't treat a missing firmware file as an error  
      
    Tomas Winkler (1):  
          mei: nfc: fix memory leak in error path  
      
    Trond Myklebust (7):  
          NFSv4.2: Fix a mismatch between Linux labeled NFS and the NFSv4.2 spec  
          NFSv4: Fix a use-after-free situation in _nfs4_proc_getlk()  
          NFSv4: Fix state reference counting in _nfs4_opendata_reclaim_to_nfs4_state  
          NFS: Fix a missing initialisation when reading the SELinux label  
          SUNRPC: gss_alloc_msg - choose _either_ a v0 message or a v1 message  
          SUNRPC: Fix a data corruption issue when retransmitting RPC calls  
          SUNRPC: Avoid deep recursion in rpc_release_client  
      
    Vinod Koul (2):  
          ALSA: compress: fix drain calls blocking other compress functions  
          ALSA: compress: fix drain calls blocking other compress functions (v6)  
      
    Wei Liu (1):  
          xen-netback: use jiffies_64 value to calculate credit timeout  
      
    Weston Andros Adamson (3):  
          NFSv4: fix NULL dereference in open recover  
          NFSv4: don't fail on missing fattr in open recover  
          NFSv4: don't reprocess cached open CLAIM_PREVIOUS  
      
    Woody Suwalski (1):  
          fix for dmesg crash dump from TOI on resume...  
      
    Xenia Ragiadakou (1):  
          usbcore: set lpm_capable field for LPM capable root hubs  
      
    Yuchung Cheng (3):  
          tcp: fix SYNACK RTT estimation in Fast Open  
          tcp: only take RTT from timestamps if new data is acked  
          tcp: do not rearm RTO when future data are sacked  
      
    hahnjo (1):  
          alx: Reset phy speed after resume

