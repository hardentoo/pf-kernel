Hey, guys. New pf-kernel release is here. [Grab the
patch](http://pf.natalenko.name/sources/3.5/patch-3.5.2-pf.bz2), launch make
and then continue reading.  
  
This release introduces mainline stable update 3.5.2 from @gregkh. There are
also two small bugfixes in TuxOnIce. But the main feature of this release is
official -ck patchset for 3.5.x kernel with BFS. Many thanks to Con. Note,
that there's possibility to disable BFS and enable BLD — I've added such an
option to Kconfig.  
  
But who really needs BLD? Here is second test result prepared by me and my
benchmark suite:  
  

[![](http://pf.natalenko.name/tests/cfs-bfs-
bld-v2.png)](http://pf.natalenko.name/tests/cfs-bfs-bld-v2.png)

  
  
There are two options: 1) my benchmark fails; 2) BLD fails. But I feel BFS
more responsive on my desktop than BLD (btw, as well as on this chart), so I'd
rather believe benchmark results.  
  
There are no known issues, but I haven't tried to use TuxOnIce as in-kernel
hibernation works well for me.  
  
Anyway, here's shortlog:  
  

    
    
    Aaron Lu (1):  
          mmc: sdhci: fix incorrect command used in tuning  
      
    Al Viro (2):  
          iscsi-target: Drop bogus struct file usage for iSCSI/SCTP  
          selinux: fix selinux_inode_setxattr oops  
      
    Alan Cox (4):  
          smack: off by one error  
          caif: fix NULL pointer check  
          wanmain: comparing array with NULL  
          x86, nops: Missing break resulting in incorrect selection on Intel  
      
    Alasdair G Kergon (1):  
          dm thin: reduce endio_hook pool size  
      
    Albert Pool (1):  
          rt2800usb: 2001:3c17 is an RT3370 device  
      
    Alex Hung (1):  
          asus-wmi: use ASUS_WMI_METHODID_DSTS2 as default DSTS ID.  
      
    Alexander Holler (1):  
          video/smscufx: fix line counting in fb_write  
      
    Amitkumar Karwar (1):  
          mwifiex: correction in mcs index check  
      
    Andreas Schwab (1):  
          m68k: Make sys_atomic_cmpxchg_32 work on classic m68k  
      
    Anton Blanchard (1):  
          be2net: Missing byteswap in be_get_fw_log_level causes oops on PowerPC  
      
    Arnd Bergmann (2):  
          ARM: pxa: remove irq_to_gpio from ezx-pcap driver  
          Input: eeti_ts: pass gpio value instead of IRQ  
      
    Ashish Sangwan (1):  
          ext4: fix hole punch failure when depth is greater than 0  
      
    Asias He (3):  
          virtio-blk: Call del_gendisk() before disable guest kick  
          virtio-blk: Reset device after blk_cleanup_queue()  
          virtio-blk: Use block layer provided spinlock  
      
    Austin Hendrix (1):  
          HID: multitouch: add support for Novatek touchscreen  
      
    Bart Van Assche (2):  
          SCSI: Fix device removal NULL pointer dereference  
          SCSI: Avoid dangling pointer in scsi_requeue_command()  
      
    Ben Hutchings (1):  
          staging: zsmalloc: Finish conversion to a separate module  
      
    Benjamin Tissoires (1):  
          HID: hid-multitouch: fix input mode feature command  
      
    Bjørn Mork (1):  
          USB: option: add ZTE MF821D  
      
    Boaz Harrosh (1):  
          ore: Fix out-of-bounds access in _ios_obj()  
      
    Borislav Petkov (1):  
          x86, microcode: Sanitize per-cpu microcode reloading interface  
      
    Brian Foster (1):  
          ext4: don't let i_reserved_meta_blocks go negative  
      
    Chris Bagwell (1):  
          Input: wacom - Bamboo One 1024 pressure fix  
      
    Chris Mason (1):  
          Btrfs: call the ordered free operation without any locks held  
      
    Christian König (1):  
          drm/radeon: fix fence related segfault in CS  
      
    Christian Lamparter (1):  
          mac80211: fix read outside array bounds  
      
    Cloud Ren (1):  
          atl1c: fix issue of io access mode for AR8152 v2.1  
      
    Colin Cross (3):  
          PM / Sleep: call early resume handlers when suspend_noirq fails  
          ARM: 7476/1: vfp: only clear vfp state for current cpu in vfp_pm_suspend  
          ARM: 7477/1: vfp: Always save VFP state in vfp_pm_suspend on UP  
      
    Colin Ian King (1):  
          USB: echi-dbgp: increase the controller wait time to come out of halt.  
      
    Cyrus Lien (1):  
          HID: add ASUS AIO keyboard model AK1D  
      
    Dan Carpenter (1):  
          USB: kaweth.c: use GFP_ATOMIC under spin_lock  
      
    Dan Rosenberg (1):  
          lib/vsprintf.c: kptr_restrict: fix pK-error in SysRq show-all-timers(Q)  
      
    Dan Williams (4):  
          SCSI: libsas: continue revalidation  
          SCSI: libsas: fix sas_discover_devices return code handling  
          SCSI: fix eh wakeup (scsi_schedule_eh vs scsi_restart_operations)  
          SCSI: fix hot unplug vs async scan race  
      
    Daniel Drake (2):  
          mmc: sdhci-pci: CaFe has broken card detection  
          cfg80211: process pending events when unregistering net device  
      
    Daniel Mack (1):  
          ALSA: snd-usb: fix clock source validity index  
      
    Darren Hart (3):  
          futex: Test for pi_mutex on fault in futex_wait_requeue_pi()  
          futex: Fix bug in WARN_ON for NULL q.pi_state  
          futex: Forbid uaddr == uaddr2 in futex_wait_requeue_pi()  
      
    David Henningsson (4):  
          ALSA: hda - Add support for Realtek ALC282  
          ALSA: hda - add dock support for Thinkpad X230 Tablet  
          ALSA: hda - remove quirk for Dell Vostro 1015  
          ALSA: hda - Fix double quirk for Quanta FL1 / Lenovo Ideapad  
      
    David Howells (1):  
          NFS: Fix a number of bugs in the idmapper  
      
    Dylan Reid (2):  
          ALSA: hda - Turn on PIN_OUT from hdmi playback prepare.  
          ALSA: hda - Don't power up when not powered down.  
      
    Eliad Peller (1):  
          mac80211: fail authentication when AP denied authentication  
      
    Fabio Estevam (1):  
          ARM: clk-imx31: Fix the keypad clock name  
      
    Felix Kaechele (1):  
          ALSA: hda - add dock support for Thinkpad X230  
      
    Feng Tang (1):  
          ACPI processor: Fix tick_broadcast_mask online/offline regression  
      
    Forest Bond (1):  
          rtlwifi: rtl8192de: Fix phy-based version calculation  
      
    Francois Romieu (1):  
          r8169: revert "add byte queue limit support".  
      
    Frank Blaschka (1):  
          qeth: repair crash in qeth_l3_vlan_rx_kill_vid()  
      
    Gerd Hoffmann (1):  
          Revert "usb/uas: make sure data urb is gone if we receive status before that"  
      
    Greg KH (1):  
          tg3: add device id of Apple Thunderbolt Ethernet device  
      
    Greg Kroah-Hartman (2):  
          Linux 3.5.1  
          Linux 3.5.2  
      
    Greg Pearson (1):  
          pcdp: use early_ioremap/early_iounmap to access pcdp table  
      
    H. Peter Anvin (2):  
          x86-64, kcmp: The kcmp system call can be common  
          random: mix in architectural randomness in extract_buf()  
      
    Hangbin Liu (1):  
          tcp: Add TCP_USER_TIMEOUT negative value check  
      
    Hans de Goede (1):  
          usbdevfs: Correct amount of data copied to user in processcompl_compat  
      
    Heiko Carstens (2):  
          s390/idle: fix sequence handling vs cpu hotplug  
          s390/mm: fix fault handling for page table walk case  
      
    Hugh Dickins (1):  
          memcg: further prevent OOM with too many dirty pages  
      
    Ilan Peer (1):  
          iwlwifi: Check BSS ctx active before call mac80211  
      
    J. Bruce Fields (2):  
          locks: fix checking of fcntl_setlease argument  
          nfsd4: our filesystems are normally case sensitive  
      
    Jan Kara (1):  
          udf: Improve table length check to avoid possible overflow  
      
    Javier Martinez Canillas (1):  
          ARM: 7480/1: only call smp_send_stop() on SMP  
      
    Jean Delvare (1):  
          ACPI, APEI: Fixup common access width firmware bug  
      
    Jeff Layton (3):  
          cifs: reinstate sec=ntlmv2 mount option  
          cifs: ensure that we always do cifsFileInfo_get under the spinlock  
          nfs: skip commit in releasepage if we're freeing memory for fs-related reasons  
      
    Jeff Mahoney (1):  
          printk: Fix calculation of length used to discard records  
      
    Jerome Glisse (5):  
          drm/radeon: fix bo creation retry path  
          drm/radeon: fix non revealent error message  
          drm/radeon: fix hotplug of DP to DVI|HDMI passive adapters (v2)  
          drm/radeon: on hotplug force link training to happen (v2)  
          drm/radeon: fix dpms on/off on trinity/aruba v2  
      
    Jesper Juhl (1):  
          net: Fix references to out-of-scope variables in put_cmsg_compat()  
      
    Jiri Benc (1):  
          net: fix rtnetlink IFF_PROMISC and IFF_ALLMULTI handling  
      
    Jiri Kosina (1):  
          tcp: perform DMA to userspace only if there is a task waiting for it  
      
    Joe Perches (1):  
          sunrpc: clnt: Add missing braces  
      
    Joe Thornber (1):  
          dm thin: fix memory leak in process_prepared_mapping error paths  
      
    Joerg Roedel (2):  
          iommu/amd: Add missing spin_lock initialization  
          iommu/amd: Fix hotplug with iommu=pt  
      
    Johannes Berg (4):  
          mac80211: fix crash with single-queue drivers  
          b43: fix crash with OpenFWWF  
          mac80211: cancel mesh path timer  
          iwlwifi: disable greenfield transmissions as a workaround  
      
    Joonsoo Kim (1):  
          mm: fix wrong argument of migrate_huge_pages() in soft_offline_huge_page()  
      
    Josh Boyer (1):  
          posix_types.h: Cleanup stale __NFDBITS and related definitions  
      
    Karsten Keil (2):  
          mISDN: Bugfix only few bytes are transfered on a connection  
          mISDN: Bugfix for layer2 fixed TEI mode  
      
    Kay Sievers (1):  
          kmsg - properly print over-long continuation lines  
      
    Kees Cook (1):  
          Yama: higher restrictions should block PTRACE_TRACEME  
      
    Kevin Cernekee (1):  
          usb: gadget: Fix g_ether interface link status  
      
    Kleber Sacilotto de Souza (1):  
          powerpc/eeh: Check handle_eeh_events() return value  
      
    Lad, Prabhakar (1):  
          media: videobuf-dma-contig: restore buffer mapping for uncached bufers  
      
    Lan Tianyu (1):  
          ACPI/AC: prevent OOPS on some boxes due to missing check power_supply_register() return value check  
      
    Larry Finger (1):  
          rtlwifi: rtl8192cu: Change buffer allocation for synchronous reads  
      
    Liam Girdwood (1):  
          ASoC: dapm: Fix locking during codec shutdown  
      
    Linus Torvalds (1):  
          random: create add_device_randomness() interface  
      
    Lionel Vaux (1):  
          HID: add support for Cypress barcode scanner 04B4:ED81  
      
    Luis Henriques (1):  
          media: ene_ir: Fix driver initialisation  
      
    Maarten Lankhorst (1):  
          nouveau: Fix alignment requirements on src and dst addresses  
      
    Marcin Slusarz (1):  
          drm/nouveau: init vblank requests list  
      
    Marek Vasut (1):  
          ARM: mxs: Remove MMAP_MIN_ADDR setting from mxs_defconfig  
      
    Mark Brown (6):  
          ASoC: dapm: Fix _PRE and _POST events for DAPM performance improvements  
          ASoC: wm8962: Redo early init of the part on resume  
          ASoC: wm8962: Allow VMID time to fully ramp  
          ASoC: wm8994: Ensure there are enough BCLKs for four channels  
          rtc: wm831x: Feed the write counter into device_add_randomness()  
          mfd: wm831x: Feed the device UUID into device_add_randomness()  
      
    Martin Schwidefsky (1):  
          s390/mm: downgrade page table after fork of a 31 bit process  
      
    Mathias Krause (1):  
          net/tun: fix ioctl() based info leaks  
      
    Meenakshi Venkataraman (1):  
          iwlwifi: fix debug print in iwl_sta_calc_ht_flags  
      
    Mel Gorman (1):  
          mm: hugetlbfs: close race during teardown of hugetlbfs shared page tables  
      
    Michael Chan (2):  
          tg3: Fix Read DMA workaround for 5719 A0.  
          tg3: Fix race condition in tg3_get_stats64()  
      
    Michal Hocko (1):  
          memcg: prevent OOM with too many dirty pages  
      
    Michel Dänzer (1):  
          drm/radeon: Try harder to avoid HW cursor ending on a multiple of 128 columns.  
      
    Mikulas Patocka (1):  
          tun: fix a crash bug and a memory leak  
      
    Mohammed Shafi Shajakhan (1):  
          ath9k: Add PID/VID support for AR1111  
      
    NeilBrown (1):  
          md/raid1: don't abort a resync on the first badblock.  
      
    Nigel (2):  
          Readd ftrace stop/start, wrongly removed in vanilla & we followed suit.  
          Inclusion of ftrace.h missed when restoring ftrace calls.  
      
    Nishanth Menon (1):  
          ARM: OMAP2+: OPP: Fix to ensure check of right oppdef after bad one  
      
    Oleksandr Natalenko (9):  
          version-3.5: bump to v3.5.2-pf  
          distro-3.5: bump to v3.5.2-pf  
          tuxonice_atomic_copy.c: add forgotten ftrace.h inclusion  
          bfs-3.5: merge unofficial BFSv424 port for Linux v3.5 by _sid_  
          cpu-schedulers-3.5: add mutual exclusion for BFS and BLD  
          configs-3.5: activate BFS in dell-inspiron-1525.config  
          bfs-3.5: update to official BFSv424 release for Linux v3.5  
          bfs-3.5: merge 3.5-ck1 stuff  
          configs-3.5: update dell-inspiron-1525.config  
      
    Olof Johansson (1):  
          block: uninitialized ioc->nr_tasks triggers WARN_ON  
      
    Paul Gortmaker (1):  
          stable: update references to older 2.6 versions for 3.x  
      
    Paul Mundt (1):  
          sh: Fix up recursive fault in oops with unset TTB.  
      
    Philipp A. Mohrenweiser (1):  
          ALSA: hda - add dock support for Thinkpad T430s  
      
    Rafael J. Wysocki (1):  
          PM / Sleep: Require CAP_BLOCK_SUSPEND to use wake_lock/wake_unlock  
      
    Rajiv Andrade (1):  
          TPM: chip disabled state erronously being reported as error  
      
    Roland Dreier (5):  
          target: Add generation of LOGICAL BLOCK ADDRESS OUT OF RANGE  
          target: Add range checking to UNMAP emulation  
          target: Fix reading of data length fields for UNMAP commands  
          target: Fix possible integer underflow in UNMAP emulation  
          target: Check number of unmap descriptors against our limit  
      
    Russell King (1):  
          ARM: Fix undefined instruction exception handling  
      
    Ryusuke Konishi (1):  
          nilfs2: fix deadlock issue between chcp and thaw ioctls  
      
    Sarah Sharp (4):  
          USB: Disable LPM while the device is unconfigured.  
          USB: Fix LPM disable/enable during device reset.  
          USB: Remove unused LPM variable.  
          USB: Fix LPM disable count mismatch on driver unbind.  
      
    Seth Forshee (1):  
          Input: synaptics - handle out of bounds values from the hardware  
      
    Shawn Guo (3):  
          ARM: 7466/1: disable interrupt before spinning endlessly  
          ARM: imx: enable emi_slow_gate clock for imx5  
          ARM: dts: imx53-ard: add regulators for lan9220  
      
    Srivatsa S. Bhat (1):  
          ftrace: Disable function tracing during suspend/resume and hibernation, again  
      
    Stanislav Kinsbursky (2):  
          SUNRPC: return negative value in case rpcbind client creation error  
          tun: don't zeroize sock->file on detach  
      
    Stanislaw Gruszka (2):  
          wireless: reg: restore previous behaviour of chan->max_power calculations  
          rt61pci: fix NULL pointer dereference in config_lna_gain  
      
    Stephen Warren (2):  
          ARM: dt: tegra trimslice: enable USB2 port  
          ARM: dt: tegra trimslice: add vbus-gpio property  
      
    Sylwester Nawrocki (1):  
          media: m5mols: Correct reported ISO values  
      
    Takashi Iwai (6):  
          ALSA: mpu401: Fix missing initialization of irq field  
          ALSA: hda - Fix invalid D3 of headphone DAC on VT202x codecs  
          ALSA: hda - Fix mute-LED GPIO setup for HP Mini 210  
          ALSA: hda - Fix polarity of mute LED on HP Mini 210  
          ALSA: hda - Fix mute-LED GPIO initialization for IDT codecs  
          ALSA: hda - Support dock on Lenovo Thinkpad T530 with ALC269VC  
      
    Tao Ma (2):  
          ext4: use proper csum calculation in ext4_rename  
          ext4: use s_csum_seed instead of i_csum_seed for xattr block  
      
    Tejun Heo (2):  
          cgroup: cgroup_rm_files() was calling simple_unlink() with the wrong inode  
          workqueue: perform cpu down operations from low priority cpu_notifier()  
      
    Theodore Ts'o (12):  
          ext4: pass a char * to ext4_count_free() instead of a buffer_head ptr  
          ext4: fix overhead calculation used by ext4_statfs()  
          ext4: undo ext4_calc_metadata_amount if we fail to claim space  
          random: make 'add_interrupt_randomness()' do something sane  
          random: use lockless techniques in the interrupt path  
          usb: feed USB device information to the /dev/random driver  
          net: feed /dev/random with the MAC address when registering a device  
          random: use the arch-specific rng in xfer_secondary_pool  
          random: add new get_random_bytes_arch() function  
          random: add tracepoints for easier debugging and verification  
          MAINTAINERS: Theodore Ts'o is taking over the random driver  
          random: remove rand_initialize_irq()  
      
    Tiejun Chen (1):  
          powerpc: Add "memory" attribute for mfmsr()  
      
    Timur Tabi (1):  
          powerpc/85xx: use the BRx registers to enable indirect mode on the P1022DS  
      
    Tony Luck (4):  
          x86/mce: Fix siginfo_t->si_addr value for non-recoverable memory faults  
          Redefine ATOMIC_INIT and ATOMIC64_INIT to drop the casts  
          random: Add comment to random_initialize()  
          dmi: Feed DMI table to /dev/random driver  
      
    Tushar Dave (1):  
          e1000e: NIC goes up and immediately goes down  
      
    Tyakos (1):  
          configs-3.5: update asus-g73sw.config  
      
    Virupax Sadashivpetimath (1):  
          spi/pl022: disable port when unused  
      
    Vivek Trivedi (1):  
          nfsd4: fix cr_principal comparison check in same_creds  
      
    Will Deacon (2):  
          ARM: 7478/1: errata: extend workaround for erratum #720789  
          ARM: 7479/1: mm: avoid NULL dereference when flushing gate_vma with VIVT caches  
      
    Xiao Guangrong (1):  
          mm: mmu_notifier: fix freed page still mapped in secondary MMU  
      
    Xishi Qiu (1):  
          mm: setup pageblock_order before it's used by sparsemem  
      
    roger blofeld (1):  
          powerpc/ftrace: Fix assembly trampoline register usage

