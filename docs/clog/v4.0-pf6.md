Happy summer, mates. I'm proud to introduce another pf-kernel release — [v4.0-pf6](https://pf.natalenko.name/sources/4.0/patch-4.0-pf6.xz).  
  
This release incorporates Linux v4.0.5 stable release as well as new BFQ v7r8 release. Also, I had to fix BFS code to handle internal kernel API changes, but it seems to work (at least for me).  
  
Another great thing happened — first BFQ quirks have been approved for 4.2 inclusion. Kudos to Paolo, Arianna et al., looking forward to finishing their hard job successfully.  
  
Shortlog appended.  
  

    
    
    Al Viro (1):  
          d_walk() might skip too much  
      
    Alban Bedel (1):  
          iio:st_sensors: Fix oops when probing SPI devices  
      
    Alex Deucher (5):  
          drm/radeon: add new bonaire pci id  
          drm/radeon: retry dcpd fetch  
          drm/radeon: don't share plls if monitors differ in audio support  
          drm/radeon/audio: make sure connector is valid in hotplug case  
          Revert "drm/radeon: only mark audio as connected if the monitor supports it (v3)"  
      
    Andi Kleen (1):  
          tools/vm: fix page-flags build  
      
    Andrea Arcangeli (1):  
          kvm: fix crash in kvm_vcpu_reload_apic_access_page  
      
    Andrew Morton (1):  
          fs/binfmt_elf.c:load_elf_binary(): return -EINVAL on zero-length mappings  
      
    Andy Grover (1):  
          target/pscsi: Don't leak scsi_host if hba is VIRTUAL_HOST  
      
    Ansgar Hegerfeld (1):  
          ALSA: hda/realtek - ALC292 dock fix for Thinkpad L450  
      
    Anton Blanchard (1):  
          powerpc: Align TOC to 256 bytes  
      
    Ard Biesheuvel (1):  
          ARM: 8325/1: exynos: move resume code to .text section  
      
    Arend van Spriel (1):  
          brcmfmac: avoid null pointer access when brcmf_msgbuf_get_pktid() fails  
      
    Axel Lin (1):  
          ASoC: mc13783: Fix wrong mask value used in mc13xxx_reg_rmw() calls  
      
    Benjamin Tissoires (2):  
          Revert "HID: logitech-hidpp: support combo keyboard touchpad TK820"  
          Input: elantech - fix semi-mt protocol for v3 HW  
      
    Bob Copeland (1):  
          omfs: fix sign confusion for bitmap loop counter  
      
    Borislav Petkov (1):  
          x86/mce: Fix MCE severity messages  
      
    Chris Lesiak (1):  
          hwmon: (ntc_thermistor) Ensure iio channel is of type IIO_VOLTAGE  
      
    Christian König (2):  
          drm/radeon: fix VM_CONTEXT*_PAGE_TABLE_END_ADDR handling  
          drm/radeon: partially revert "fix VM_CONTEXT*_PAGE_TABLE_END_ADDR handling"  
      
    Christoph Hellwig (2):  
          nfsd/blocklayout: pretend we can send deviceid notifications  
          nfsd: fix the check for confirmed openowner in nfs4_preprocess_stateid_op  
      
    Dan Williams (1):  
          ahci: avoton port-disable reset-quirk  
      
    Daniel Axtens (1):  
          powerpc/mce: fix off by one errors in mce event handling  
      
    Daniel Vetter (1):  
          drm/plane-helper: Adapt cursor hack to transitional helpers  
      
    Darrick J. Wong (1):  
          jbd2: fix r_count overflows leading to buffer overflow in journal recovery  
      
    Dave Chinner (2):  
          xfs: xfs_attr_inactive leaves inconsistent attr fork state behind  
          xfs: xfs_iozero can return positive errno  
      
    David Henningsson (2):  
          ALSA: hda - Add Conexant codecs CX20721, CX20722, CX20723 and CX20724  
          ALSA: hda - Add headset mic quirk for Dell Inspiron 5548  
      
    David Vrabel (1):  
          xen/events: don't bind non-percpu VIRQs with percpu chip  
      
    Dong Aisheng (1):  
          clk: add missing lock when call clk_core_enable in clk_set_parent  
      
    Eric W. Biederman (2):  
          mnt: Fail collect_mounts when applied to unmounted mounts  
          fs_pin: Allow for the possibility that m_list or s_list go unused.  
      
    Eric Work (2):  
          md/raid0: fix restore to sector variable in raid0_make_request  
          md/raid0: fix restore to sector variable in raid0_make_request  
      
    Eryu Guan (1):  
          ext4: check for zero length extent explicitly  
      
    Filipe Manana (1):  
          Btrfs: fix racy system chunk allocation when setting block group ro  
      
    Gabriele Mazzotta (2):  
          libata: Add helper to determine when PHY events should be ignored  
          libata: Ignore spurious PHY event on LPM policy change  
      
    Greg Kroah-Hartman (1):  
          Linux 4.0.5  
      
    Guenter Roeck (3):  
          hwmon: (tmp401) Do not auto-detect chip on I2C address 0x37  
          hwmon: (nct6775) Add missing sysfs attribute initialization  
          hwmon: (nct6683) Add missing sysfs attribute initialization  
      
    Haim Dreyfuss (1):  
          iwlwifi: mvm: Free fw_status after use to avoid memory leak  
      
    Hans de Goede (1):  
          usb-storage: Add NO_WP_DETECT quirk for Lacie 059f:0651 devices  
      
    Harald Freudenberger (1):  
          crypto: s390/ghash - Fix incorrect ghash icv buffer handling.  
      
    Helge Deller (1):  
          parisc,metag: Fix crashes due to stack randomization on stack-grows-upwards architectures  
      
    Hubbitus (1):  
          Fix bfs compilation with -Werror=strict-prototypes  
      
    Ilya Dryomov (2):  
          libceph: request a new osdmap if lingering request maps to no osd  
          Revert "libceph: clear r_req_lru_item in __unregister_linger_request()"  
      
    Ingo Molnar (1):  
          x86/fpu: Disable XSAVES* support for now  
      
    Inki Dae (1):  
          ARM: dts: set display clock correctly for exynos4412-trats2  
      
    Ivan T. Ivanov (1):  
          iio: adc: spmi-vadc: Fix overflow in output value normalization  
      
    Jacob Pan (1):  
          iio/axp288_adc: add missing channel info mask  
      
    Jan Kara (1):  
          lib: Fix strnlen_user() to not touch memory after specified maximum  
      
    Janusz Dziedzic (1):  
          mac80211: move WEP tailroom size check  
      
    Jason A. Donenfeld (2):  
          USB: visor: Match I330 phone more precisely  
          USB: pl2303: Remove support for Samsung I330  
      
    Javier Martinez Canillas (1):  
          clk: exynos5420: Restore GATE_BUS_TOP on suspend  
      
    Jean Delvare (1):  
          firmware: dmi_scan: Fix ordering of product_uuid  
      
    Joe Lawrence (1):  
          xhci: gracefully handle xhci_irq dead device  
      
    Joe Thornber (1):  
          dm: fix casting bug in dm_merge_bvec()  
      
    Johan Hovold (1):  
          mfd: da9052: Fix broken regulator probe  
      
    Johannes Berg (1):  
          mac80211: don't use napi_gro_receive() outside NAPI context  
      
    John Stultz (1):  
          ktime: Fix ktime_divns to do signed division  
      
    Junichi Nomura (1):  
          dm: fix reload failure of 0 path multipath mapping on blk-mq devices  
      
    K. Y. Srinivasan (1):  
          storvsc: Set the SRB flags correctly when no data transfer is needed  
      
    Kevin Cernekee (1):  
          UBI: block: Add missing cache flushes  
      
    Koro Chen (1):  
          ASoC: dapm: Modify widget stream name according to prefix  
      
    Krzysztof Kozlowski (1):  
          ARM: EXYNOS: Fix dereference of ERR_PTR returned by of_genpd_get_from_provider  
      
    Krzysztof Opasiak (1):  
          usb: gadget: configfs: Fix interfaces array NULL-termination  
      
    Larry Finger (1):  
          rtlwifi: rtl8192cu: Fix kernel deadlock  
      
    Liad Kaufman (1):  
          iwlwifi: pcie: prevent using unmapped memory in fw monitor  
      
    Liang Li (1):  
          kvm/fpu: Enable eager restore kvm FPU for MPX  
      
    Luciano Coelho (1):  
          iwlwifi: mvm: clean net-detect info if device was reset during suspend  
      
    Ludovic Desroches (1):  
          mmc: atmel-mci: fix bad variable type for clkdiv  
      
    Lukas Czerner (1):  
          ext4: fix NULL pointer dereference when journal restart fails  
      
    Malcolm Priestley (6):  
          staging: vt6656: use ieee80211_tx_info to select packet type.  
          staging: vt6655: device_free_tx_buf use only ieee80211_tx_status_irqsafe  
          staging: vt6655: implement IEEE80211_TX_STAT_NOACK_TRANSMITTED  
          staging: vt6655: Fix 80211 control and management status reporting.  
          staging: vt6655: vnt_tx_packet Correct TX order of OWNED_BY_NIC  
          staging: vt6655: lock MACvWriteBSSIDAddress.  
      
    Mark Edwards (1):  
          USB: cp210x: add ID for KCF Technologies PRN device  
      
    Mark Hounschell (1):  
          sd: Disable support for 256 byte/sector disks  
      
    Mark Rutland (1):  
          ARM: 8356/1: mm: handle non-pmd-aligned end of RAM  
      
    Martin K. Petersen (1):  
          libata: Blacklist queued TRIM on all Samsung 800-series  
      
    Martin Schwidefsky (1):  
          s390/mm: correct return value of pmd_pfn  
      
    Mathias Nyman (2):  
          xhci: fix isoc endpoint dequeue from advancing too far on transaction error  
          xhci: Solve full event ring by increasing TRBS_PER_SEGMENT to 256  
      
    Mel Gorman (1):  
          mm, numa: really disable NUMA balancing by default on single node machines  
      
    Michael Brunner (1):  
          gpio: gpio-kempld: Fix get_direction return value  
      
    Miklos Szeredi (2):  
          ovl: don't remove non-empty opaque directory  
          ovl: mount read-only if workdir can't be created  
      
    Nadav Haklai (1):  
          thermal: armada: Update Armada 380 thermal sensor coefficients  
      
    Naidu Tellapati (5):  
          iio: adc: cc10001: Fix the channel number mapping  
          iio: adc: cc10001: Fix incorrect use of power-up/power-down register  
          iio: adc: cc10001: Add delay before setting START bit  
          iio: adc: cc10001: Fix regulator_get_voltage() return value check  
          pwm: img: Impose upper and lower timebase steps value  
      
    NeilBrown (2):  
          md/raid5: don't record new size if resize_stripes fails.  
          md: fix race when unfreezing sync_action  
      
    Oded Gabbay (2):  
          iommu/amd: Fix bug in put_pasid_state_wait  
          drm/amdkfd: Don't report local memory size  
      
    Oleksandr Natalenko (5):  
          fix raid0+ext4 patch cherry-picking  
          bfq-4.0: update BFQ to v7r8  
          version-4.0: bump version to v4.0-pf6  
          distro-4.0: bump version to v4.0-pf6  
          ck-4.0: use new rt_mutex_get_effective_prio() API  
      
    Pan Xinhui (1):  
          tty/n_gsm.c: fix a memory leak when gsmtty is removed  
      
    Paolo Bonzini (2):  
          Revert "KVM: x86: drop fpu_activate hook"  
          KVM: MMU: fix CR4.SMEP=1, CR0.WP=0 with shadow pages  
      
    Paul Burton (1):  
          MIPS: fix FP mode selection in lieu of .MIPS.abiflags data  
      
    Peter Hurley (1):  
          pty: Fix input race when closing  
      
    Philippe Reynes (1):  
          ARM: dts: imx27: only map 4 Kbyte for fec registers  
      
    Rafael J. Wysocki (1):  
          ACPI / init: Fix the ordering of acpi_reserve_resources()  
      
    Russell King (1):  
          ARM: fix missing syscall trace exit  
      
    Rusty Russell (1):  
          lguest: fix out-by-one error in address checking.  
      
    Sasha Levin (2):  
          fs, omfs: add NULL terminator in the end up the token list  
          vfs: read file_handle only once in handle_to_path  
      
    Scott Branden (1):  
          rt2x00: add new rt2800usb device DWA 130  
      
    Scott Mayhew (1):  
          svcrpc: fix potential GSSX_ACCEPT_SEC_CONTEXT decoding failures  
      
    Shaohua Li (1):  
          sched: always use blk_schedule_flush_plug in io_schedule_out  
      
    Shawn Guo (1):  
          ARM: dts: fix imx27 dtb build rule  
      
    Srinivas Pandruvada (2):  
          iio: light: hid-sensor-prox: Fix modifier  
          iio: pressure: hid-sensor-press: Fix modifier  
      
    Stephane Eranian (1):  
          perf/x86/rapl: Enable Broadwell-U RAPL support  
      
    Steven Rostedt (1):  
          module: Call module notifier on failure after complete_formation()  
      
    Sławomir Demeszko (1):  
          staging: gdm724x: Correction of variable usage after applying ALIGN()  
      
    Takashi Iwai (4):  
          ALSA: usb-audio: Add quirk for MS LifeCam Studio  
          ALSA: hda - Add headphone quirk for Lifebook E752  
          Revert "ALSA: hda - Add mute-LED mode control to Thinkpad"  
          ALSA: hda - Fix noise on AMD radeon 290x controller  
      
    Tatyana Nikolova (1):  
          RDMA/core: Fix for parsing netlink string attribute  
      
    Theodore Ts'o (1):  
          ext4: fix lazytime optimization  
      
    Thomas Betker (4):  
          iio: adc: xilinx: Fix register addresses  
          iio: adc: xilinx: Fix "vccaux" channel .address  
          iio: adc: xilinx: Fix VREFP scale  
          iio: adc: xilinx: Fix VREFN sign  
      
    Thomas Gleixner (1):  
          sched: Handle priority boosted tasks proper in setscheduler()  
      
    Vasily Khoruzhick (1):  
          ASoC: uda1380: Avoid accessing i2c bus when codec is disabled  
      
    Vineet Gupta (1):  
          ARC: unbork !LLSC build  
      
    Vittorio G (VittGam) (1):  
          ALSA: usb-audio: Add quirk for MS LifeCam HD-3000  
      
    Vladimir Davydov (2):  
          gfp: add __GFP_NOACCOUNT  
          kernfs: do not account ino_ida allocations to memcg  
      
    Wei Yongjun (1):  
          power/reset: at91: fix return value check in at91_reset_platform_probe()  
      
    Will Deacon (1):  
          iommu/arm-smmu: Fix sign-extension of upstream bus addresses at stage 1  
      
    Xi Wang (1):  
          arm64: bpf: fix signedness bug in loading 64-bit immediate  
      
    Xiao Guangrong (2):  
          KVM: MMU: fix smap permission check  
          KVM: MMU: fix SMAP virtualization  
      
    Zidan Wang (2):  
          ASoC: wm8960: fix "RINPUT3" audio route error  
          ASoC: wm8994: correct BCLK DIV 348 to 384
